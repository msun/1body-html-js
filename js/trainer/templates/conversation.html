<ion-view cache-view="false">
    <ion-nav-title><span class="ob-nav-bar-logo"></span></ion-nav-title>
    <ion-content class="ob-grey-bg">
        <ion-refresher
                pulling-text="Pull to refresh..."
                on-refresh="doRefresh()">
        </ion-refresher>
        <div class="ob-list">
            <div class="ob-list-emptytext"
                 ng-show="messages.length <= 0">No messages yet</div>
            <div class="ob-list-row" ng-repeat="message in myMessages | orderBy:'created'">
                <div class="ob-list-col-img">
                    <img class="ob-list-img"
                         src="https://s3.amazonaws.com/com.onebody.profile/Users/{{message.userID | htmlEncode}}/profilepic.jpg"
                         onerror="this.src='img/emptypic-user.png'"/>
                </div>
                <div class="ob-list-col-flex">
                    <div class="ob-list-text">{{users[message.userID].username}}
                        <span class="ob-list-subtext">{{message.created | date:'yyyy-MM-dd HH:mm:ss'}}</span></div>
                    <div class="ob-list-subtext">{{message.text}}</div>
                </div>
            </div>
        </div>
    </ion-content>
    <ion-footer-bar class="ob-footer-input-bar">
        <div class="ob-footer-input-container">
            <input class="ob-footer-input" ng-model="newmessage.text"
                   type="text" placeholder="Enter a comment"/>
        </div>
        <div class="ob-footer-input-sendbutton ob-button-blue" ng-click="addNewMessage()">Send</div>
    </ion-footer-bar>
</ion-view>
