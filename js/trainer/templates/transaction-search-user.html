<ion-view view-title="My Sessions" cache-view="false">
    <ion-nav-buttons side="right">
        <a ng-href="#/menu/calendar/my-schedule/{{$root.user.$id}}/{{$root.user.username}}" class="button button-icon icon ion-calendar">Calendar</a>
    </ion-nav-buttons>

    <ion-content class="has-header ob-grey-bg">
        <p class="ob-list-text">Total Earnings From {{params.userName}}: {{total | number: 2}}</p>
        <div class="ob-list-col-img">
            <img class="ob-list-img"
                 src="https://s3.amazonaws.com/com.onebody.profile/Users/{{params.userID | htmlEncode}}/profilepic.jpg"
                 onerror="this.src='img/emptypic-user.png'"/>
        </div>
        <div class="ob-list-col-flex">
            <div class="ob-list-text">User: {{params.userName}}</div>
        </div>

        <select ng-model="chartType">
            <option value="pie">pie</option>
            <option value="bar">bar</option>
            <option value="line">line</option>
            <option value="area">area</option>
        </select>
        <div id="chart1" ac-chart="chartType" ac-data="data1" ac-config="config1"></div>

        <div ng-show="monthlyTransactions.length <= 0" class="ob-list-emptytext">No sessions to display</div>
        <div>
            <div ng-repeat="tran in monthlyTransactions | orderBy: '-yearMonth'">
                <p class="ob-list-emptytext">Total Earnings {{tran.yearMonth}}: ${{tran.total |  number:2}}</p>
                <div class="ob-list">
                    <a class="ob-list-row" ng-repeat="item in tran.transactions | orderBy: '-starttime'" ng-href="#/menu/transaction-detail/{{item.$id}}">

                        <p class="ob-list-text">Start Time: {{item.starttime | date:'yyyy-MM-dd HH:mm:ss'}}</p>
                        <p class="ob-list-text">Created: {{item.created | date:'yyyy-MM-dd HH:mm:ss'}}</p>
                        <p class="ob-list-text">Tokens: {{item.tokens}}</p>
                        <p class="ob-list-text">Review: {{item.text}}</p>
                        <p class="profile-feed-review-stars">
                            <span class="profile-feed-review-star" ng-show="item.review.rating > 0" id="profile-feed-review-star-1"></span>
                            <span class="profile-feed-review-star" ng-show="item.review.rating > 1" id="profile-feed-review-star-2"></span>
                            <span class="profile-feed-review-star" ng-show="item.review.rating > 2" id="profile-feed-review-star-3"></span>
                            <span class="profile-feed-review-star" ng-show="item.review.rating > 3" id="profile-feed-review-star-4"></span>
                            <span class="profile-feed-review-star" ng-show="item.review.rating > 4" id="profile-feed-review-star-5"></span>
                        </p>
                        <p class="ob-list-text">Duration: {{item.duration * 30}} mins</p>
                    </a>
                </div>
            </div>
        </div>
        <style type="text/css">
            [ac-chart] {
                width: 100%;
                height: 400px;
                margin: 0 1%;
            }

            .ac-tooltip {
                color: black;
                border: 2px solid rgba(200,200,0,0.8);
                background-color: rgba(200,200,0,0.5);
                z-index: 999;
            }

            #chart1 .ac-legend-box {
                border-radius: 10px;
            }

        </style>


    </ion-content>
</ion-view>
